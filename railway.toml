[build]
builder = "nixpacks"

[phases.setup]
nixPkgs = ["python311", "nodejs_20"]

[phases.install]
cmds = ["pip install -r backend/requirements.txt", "cd frontend && npm install"]

[phases.build]
cmds = ["cd frontend && npm run build"]

[service]
root = "backend"

[[deploy]]
serviceName = "NexoBot-AI"
startCommand = "uvicorn app.main:app --host 0.0.0.0 --port $PORT"
healthcheckPath = "/api/v1/health"
healthcheckTimeout = 300

[[deploy]]
serviceName = "tranquil-abundance"
startCommand = "cd ../frontend && npx next start -H 0.0.0.0 -p $PORT"
healthcheckPath = "/"
healthcheckTimeout = 300
